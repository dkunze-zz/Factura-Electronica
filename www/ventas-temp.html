<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
        <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="apple-touch-startup-image-640x1096.html">
        <title>Tu Factura Electronica | Prysma Software</title>
        <link rel="stylesheet" href="css/framework7.css">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="css/colors/magenta.css">
        <link type="text/css" rel="stylesheet" href="css/swipebox.css" />
        <link type="text/css" rel="stylesheet" href="css/animations.css" />        
        <style>
            .no-js #loader { display: none;  }
            .js #loader { display: block; position: absolute; left: 100px; top: 0; }
            .se-pre-con {
                position: fixed;
                left: 0px;
                top: 0px;
                width: 100%;
                height: 100%;
                z-index: 99999;
                background: url(images/loader.gif) center no-repeat #fff;
            }
        </style>
    </head>    
    <body id="mobile_wrap">
        <div class="pages">
            <div data-page="projects" class="page no-toolbar no-navbar">
                <div class="page-content">

                    <div class="navbarpages">
                        <div class="nav_left_logo"><a href="index.html"><img src="images/newfelogo.png" alt="" title="" /></a></div>
                        <div class="nav_right_button"><a href="index.html" class="external"><img src="images/icons/white/menu.png" alt="" title="" /></a></div>
                    </div>
                    <div id="pages_maincontent">

                        <h2 class="page_title">Ventas Temporales</h2> 

                        <div class="page_content"> 
                            <blockquote>
                                Facturas temporales que aun no han sido sincronizadas
                            </blockquote>

                            <blockquote>
                                <button class="btn" onclick="backToInvoices();" type="button">Volver a Ventas</button>
                                <button class="btn" onclick="redirectToNewInvoice();" type="button">Crear Nueva Venta</button>
                            </blockquote>                            

                            <table>
                                <thead>
                                    <tr style="background-color:#ddd; border-bottom: 1px solid #6a6a6a;">
                                        <th class="id" style="width: 20px; padding: 10px;">
                                            &nbsp;
                                        </th>
                                        <th class="series_id" style="width: 120px; padding: 10px;">
                                            Serie
                                        </th>
                                        <th class="customer_name" style="width:350px; padding: 10px;">
                                            Cliente
                                        </th>
                                        <th class="issue_date" style="width:100px; padding: 10px;">
                                            Fecha
                                        </th>                                        
                                        <th class="gross_amount" style="width:100px; padding: 10px;">
                                            Total
                                        </th>

                                    </tr>
                                </thead>                                
                                <tbody id="ventas_dataContainerTable">

                                </tbody>
                            </table>
                            
                            <blockquote>
                                <button id="btnSyncToSystem" class="btn" onclick="syncToSystem('invoices');" type="button">Sincronizar al Sistema</button>                                
                            </blockquote>                            


                            <div id="msgNoInvoices" style="display: block; margin-top: 50px;">
                                No existen facturas temporales.
                            </div>
                            

                            <div id="ventas_notSyncronizedMessage" style="display: block; margin-top: 50px;">
                                Debe sincronizar esta secci&oacute;n para cargar la informaci&oacute;n.
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>



        <script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
        <script src="js/jquery.validate.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="js/framework7.js"></script>
        <script type="text/javascript" src="js/my-app.js"></script>
        <script type="text/javascript" src="js/jquery.swipebox.js"></script>
        <script type="text/javascript" src="js/email.js"></script>


        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script>
                                    $(".se-pre-con").fadeIn();
        </script>

        <script type="text/javascript">
            app.initialize();

            $(window).load(function () {
                loadUserInvoicesTemp(); // load VENTAS section
                $(".se-pre-con").fadeOut();// Animate loader off screen
            });

            function invoicesExpand(elementid) {
                $("#details_" + elementid).toggle();
            }
            function redirectToNewInvoice() {
                location.href = 'ventas-crear-venta.html';
            }
            function backToInvoices() {
                location.href = 'ventas.html';
            }
            function tempInvoiceDelete(tempInvoiceId) {
                if (confirm("Seguro que desea eliminar la factura temporal?")) {
                    var getID = tempInvoiceId.split("-");
                    getID = getID[1];

                    // dont change the COUNTER because it will change all INDEX invoices
                    // window.localStorage.removeItem("TEMP_INVOICES_COUNTER");
                    for (var i = 0; i < parseInt(window.localStorage.getItem("TEMP_INVOICES_ITEMS_COUNTER_" + getID), 10); i++) {
                        window.localStorage.removeItem("TEMP_INVOICES_ITEM_REFERENCE_" + getID + "_" + i);
                        window.localStorage.removeItem("TEMP_INVOICES_ITEM_QTY_" + getID + "_" + i);
                        window.localStorage.removeItem("TEMP_INVOICES_ITEM_GROSSAMOUNT_" + getID + "_" + i);
                    }
                    window.localStorage.removeItem("TEMP_INVOICES_CUSTOMER_" + getID);
                    window.localStorage.removeItem("TEMP_INVOICES_INVOICETYPE_" + getID);
                    window.localStorage.removeItem("TEMP_INVOICES_ISSUEDATEDB_" + getID);
                    window.localStorage.removeItem("TEMP_INVOICES_ISSUEDATESHOW_" + getID);
                    window.localStorage.removeItem("TEMP_INVOICES_ITEMS_COUNTER_" + getID);
                    window.localStorage.removeItem("TEMP_INVOICES_GROSSAMOUNT_" + getID);
                    location.href = 'ventas-temp.html';
                }
            }
        </script>

    </body>
</html>
